<!DOCTYPE html>
<html>

<head>
    <title>GPU Filters - PyCUDA</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div id="loader" class="loader hidden">
        Procesando imagen, por favor espere...
    </div>


    <div class="container">

        <h1>GPU Filters - PyCUDA</h1>

        <div class="card">
            <form id="form-gpu" enctype="multipart/form-data">

                <label>Seleccione imagen:</label>
                <input type="file" name="imagen" id="input-img" required>

                <label>Filtro:</label>
                <select name="filtro" id="select-filtro">
                    <option value="sobel">Sobel</option>
                    <option value="emboss">Emboss</option>
                    <option value="gauss">Gauss</option>
                    <option value="sharpen">Sharpen</option>
                </select>

                <label>Tama√±o kernel:</label>
                <select name="ksize" id="select-ksize">
                    <option value="9">9</option>
                    <option value="21">21</option>
                    <option value="49">49</option>
                </select>

                <label>Configuraci√≥n de Bloques (GPU):</label>

                <div class="block-grid">
                    <div>
                        <label>Block X</label>
                        <input type="number" id="block_x" name="block_x" value="16" min="1">
                    </div>
                    <div>
                        <label>Block Y</label>
                        <input type="number" id="block_y" name="block_y" value="16" min="1">
                    </div>
                    <div>
                        <label>Block Z</label>
                        <input type="number" id="block_z" name="block_z" value="1" min="1">
                    </div>
                </div>

                <p id="blockWarning" class="warning hidden">
                    ‚ö† El n√∫mero total de hilos por bloque no puede superar 1024.
                </p>
                <div class="presets">
                    <h3>Preconfiguraciones:</h3>
                    <button type="button" id="presetLow" class="preset-btn">Bajo</button>
                    <button type="button" id="presetMed" class="preset-btn">Medio</button>
                    <button type="button" id="presetHigh" class="preset-btn">Alto</button>
                </div>



                <button type="submit">Procesar por GPU</button>
            </form>
        </div>

        <h2>Resultado</h2>

        <div class="images-row">
            <div>
                <p>Original</p>
                <img id="original" class="preview">
            </div>
            <div>
                <p>Procesada</p>
                <img id="resultado" class="preview">
            </div>
        </div>

        <!--PAR√ÅMETROS UTILIZADOS -->
        <div class="card params-card">
            <h2>Par√°metros utilizados</h2>
            <div id="parametros-resultado" class="param-box"></div>
        </div>

    </div>
    <button id="btnReset" class="floating-reset">‚Ü∫</button>
    <!-- Pesta√±a tipo carpeta -->
    <div id="infoTab" class="info-tab">‚ÑπÔ∏è Info</div>

    <!-- Panel lateral -->
    <div id="infoPanel" class="info-panel">
        <button id="closeInfo" class="close-info">Cerrar</button>

        <h2>Informaci√≥n de filtros</h2>

        <h3>üîµ Sobel</h3>
        <p>Detecta bordes resaltando los cambios fuertes de intensidad en la imagen.</p>
        <p><strong>Par√°metros:</strong></p>
        <ul>
            <li><strong>Factor = 2.0:</strong> Amplifica la intensidad del borde detectado.</li>
        </ul>

        <h3>üü† Emboss</h3>
        <p>Crea un efecto de relieve (3D) en la imagen haciendo que parezca grabada.</p>
        <p><strong>Par√°metros:</strong></p>
        <ul>
            <li><strong>Offset = 128:</strong> Reposiciona los valores para que el relief sea visible.</li>
            <li><strong>Factor = 2.0:</strong> Aumenta la intensidad del relieve.</li>
        </ul>

        <h3>üü¢ Gaussiano</h3>
        <p>Suaviza la imagen reduciendo ruido, aplicando un desenfoque suave y uniforme.</p>
        <p><strong>Par√°metros:</strong></p>
        <ul>
            <li><strong>Sigma = 90.0:</strong> Controla qu√© tan suave ser√° el desenfoque.<br>
                Un sigma grande = m√°s desenfoque.</li>
        </ul>

        <h3>üî¥ Sharpen</h3>
        <p>Aumenta la nitidez destacando bordes y detalles finos.</p>
        <p><strong>Par√°metros:</strong></p>
        <ul>
            <li><strong>Intensidad = 20.0:</strong> Controla qu√© tanto se realza la nitidez.</li>
        </ul>

        <hr>

        <h3>¬øQu√© es un Kernel?</h3>
        <p>
            Un <strong>kernel</strong> es una peque√±a matriz de n√∫meros que se ‚Äúdesliza‚Äù sobre la imagen
            para aplicar un efecto.
            Este proceso se llama <strong>convoluci√≥n</strong>.
        </p>
        <p>
            El tama√±o del kernel (por ejemplo 9√ó9, 21√ó21 o 49√ó49) determina
            cu√°ntos p√≠xeles se usan para calcular el nuevo valor.
            <br><strong>Kernel grande ‚áí efecto m√°s fuerte pero m√°s lento.</strong>
        </p>
    </div>


    <script src="/static/script.js"></script>
</body>

</html>